<!DOCTYPE html>
<html>

<head lang="en">
    <meta charset="UTF-8">

    <style>
      body {
        background-color: black
      };
    </style>

    <script src="./js/libs/evo-player.js"></script>
    <script src="./js/homeVideo.js"></script>
    <script src="https://unpkg.com/@lightningjs/core@2.1.2/dist/lightning.min.js"></script>
</head>


<body>
  <div id="evoPlayer">
    <video id="remoteVideo" width="1280" height="720"></video>

    <script>
      "use strict";

      function getUrlParameter(name) {
        name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
        var regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
        var results = regex.exec(location.search);
        return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
      }

      var preloadJs = getUrlParameter("preLaunch");
      if(preloadJs) {
        // if($badger && $badger.active) {
        //     $badger.logger.info("Pre loading the JS resources");
        // } else {
        //     console.log("Pre loading the JS resources");
        // }
        console.log("Pre loading the JS resources");
      } else {
          console.log("Launching the Browser for Live video Launch");
          var options = {
            ersIp: "7296865048409624223.ssrouterprod.comcast.net",
            streamName: 'stream2',
            roomName: "7296865048409624223",
            videoTagId: 'remoteVideo',
            useSrtp: true,
            ersOverSsl: true,
            port: "443",
            ersToken: "eyJraWQiOiJ4aG9tZS1ldm8tdGVzdCIsImFsZyI6IlJTMjU2In0.eyJjYW1lcmEiOiI3OEIyMTNFMUEwOEUiLCJ4Ym9faWQiOiI3Mjk2ODY1MDQ4NDA5NjI0MjIzIiwiaWF0IjoxNjExOTUyNDU5LCJleHAiOjE2MTE5NTMwNTl9.J7XfBcC5O5j51VncGP78KJNLgRLWpv3lQGUEVl-orKtp10ro0XPuuYBzSnt_g0NtEklgSXXO5NWe5bQHjULZOMp1oVX8ZnBzKJH4AZkui0V0GGE3PX_MTDcvdaqqyWGWZnCGVxdk93qdOheIt49cvsBHelTGQNDUnOPG7VC8jRYUolAqUDn3XXXcdQdVcXTjKflo1fmy0n5V9eHCt11iwqqyX8NpqkTQNs8NB9vS7itq1L-b45tsBNiKKL9yA_6uU-g-lodIu-erDP0QPjk110A2nBkzqijquWuquwoVhhDMUCPt_PjFCFIC8u1tEYvWwUPzZOYohfaDSusImRixkg",
          };
          var lbhost = "";
          var localhost = "";
          if ( lbhost && localhost ) {
                options.ersIp = lbhost;
                options.headers = {
                  'Host': localhost
                };
          }
          var uaString = "X1App";

          var homeVideo = new window.HomeVideo(options);

          // if ($badger && $badger.active()) {
          //   $badger.userActionMetricsHandler(HomeVideoConstants.NGV_BROWSER_LAUNCHED, "onMoneyBadgerReady");
          //   homeVideo.startPlay();
          // } else {
          //   document.addEventListener('onMoneyBadgerReady', function() {
          //       $badger.userActionMetricsHandler(HomeVideoConstants.NGV_BROWSER_LAUNCHED, "onMoneyBadgerReady");
          //       homeVideo.startPlay();
          //   });
          // }
          homeVideo.startPlay();

          window.exitLiveVideo = function() {
            //$badger.logger.info("exitLiveVideo initiated from XRE");
            homeVideo.stopPlay();
          };
          //this.videoEl = document.getElementById('remoteVideo')
       }
    </script>
    <!-- <script>
      class LightningAppOverlay extends lng.Application {
        static _template() {
          return {
            Text: {
            mount: 0.5,
            x: 640,
            y: 72,
            zIndex: 3,
            text: {
            text: "LIGHTNING UVE PLAYER",
            fontFace: 'Regular',
            fontSize: 46,
            textColor: 0xbbff0000,
            }
            },
          }
        }
        _init() {
          this.videoEl = getElementById('remoteVideo')
          // this.videoEl = document.createElement('video')
          // this.videoEl.style.position = 'absolute'
          // this.videoEl.setAttribute('width', '100%')
          // this.videoEl.setAttribute('height', '100%')
          // this.videoEl.setAttribute('src', 'placeholder.mp4')
          // this.videoEl.setAttribute('type', 'video/ave')
          //document.body.appendChild(this.videoEl)
          this.player = new AAMPMediaPlayer()
          var locator = "http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4"
          this.player.load(locator)
        }
      }
      window.onload = function() {
        const options = {stage: {w: 1920, h: 1080}}
        const app = new LightningAppOverlay(options);
        document.body.appendChild(app.stage.getCanvas());
      }
   </script> -->
  </div>
</body>

</html>
